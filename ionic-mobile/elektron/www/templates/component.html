<ion-view view-title="{{component.label}}">
  <ion-content>
    <div class="card">
      <div class="item">
        <ion-toggle  ng-model="component_status" class="toogle-assertive"
                    ng-change="changeStatus()"
                   ng-checked="component_status">
                   <span>Consumo de <b>{{component_server.label}}</b></span>
        </ion-toggle>
      </div>
      <div class="item item-text-wrap">
        <div ng-show="spinner == true" class="center-spinner">
          <ion-spinner icon="android"></ion-spinner>
        </div>
        <canvas ng-show="spinner == false" id="line" class="chart chart-line" chart-data="line.data" chart-labels="line.labels" chart-series="line.series" chart-options="options" chart-dataset-override="datasetOverride" chart-click="onClick"></canvas>
      </div>

      <div class="item item-divider">
        <span>Detalles:</span>
      </div>
      <div class="item">
        <span class=""><b>Label: </b>
          <span class="badge badge-light">{{currentLabel}}
            <a ng-click="openModal()" class="edit-component-label">
              <i class="icon positive ion-compose"></i>
            </a>
          </span>
        </span>

      </div>
      <div class="item">
        <span class=""><b>Estado: </b>
          <span ng-if="component_status == true" class="badge badge-balanced">encendido</span>
          <span ng-if="component_status == false" class="badge badge-assertive">apagado</span>
        </span>
      </div>
      <div class="item">
        <span class=""><b>Ãšltimo consumo</b>: </span>
        <span class="badge badge-calm">{{last_data}} w</span>
      </div>
      <div class="item">
        <span class=""><b>IP</b>:
          <span class="badge badge-light">{{component_server.device_ip}}</span>
        </span>
      </div>
      <div class="item">
        <span class=""><b>MAC</b>:
          <span class="badge badge-light">{{component_server.device_mac}}</span>
        <span>
      </div>
      <div class="item-divider">

      </div>
      <ion-toggle  ng-model="component_activate"
                    ng-change="activateComponent()"
                   ng-checked="component_activate">
                   <span><b>Activo:</b></span>
      </ion-toggle>
      <div class="item">
        <span class=""><b>Enchufado</b>:
          <span ng-if="component_server.pluged == true" class="badge badge-positive">enchufado</span>
          <span ng-if="component_server.pluged == false" class="badge badge-black">desenchufado</span>
        </span>
      </div>
      <div class="item item-divider">
        <span>Configurar componente por</span>
      </div>
      <div class="item">
        <div class="button-bar">
          <a ui-sref="app.tasks" class="button button-positive icon ion-gear-a">
            Tiempo
          </a>
          <a ui-sref="app.tasks" class="button button-positive icon ion-gear-a">
            Consumo
          </a>
        </div>
      </div>
    </div>
  </ion-content>

  <script id="templates/modal.html" type="text/ng-template">
    <ion-modal-view>
      <ion-header-bar class="bar bar-header bar-positive">
        <h1 class="title">Editar nombre</h1>
        <button class="button button-clear button-primary" ng-click="modal.hide()">Cancelar</button>
      </ion-header-bar>
      <ion-content class="padding">
        <div class="list">
          <label class="item item-input">
            <span class="input-label">Label:</span>
            <input ng-model="newName" placeholder="{{currentLabel}}" type="text">
          </label>
          <button class="button button-full button-positive" ng-click="saveLabel(newName)">Guardar</button>
        </div>
      </ion-content>
    </ion-modal-view>
  </script>

</ion-view>
